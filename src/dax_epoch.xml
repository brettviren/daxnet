<class
    name = "dax_epoch"
    signature = "0"
    title = "DAX Epoch Message Codec"
    script = "zproto_codec_c"
    package_dir = "../include"
    pubsub = "1"
    >
  The DAX Epoch Codec.

  <define name = "BOT"  value = "0x8000000000000001"> 
    The end of time as measured in a 64 bit clock.
  </define>

  <define name = "EOT"  value = "0x7FFFFFFFFFFFFFFF">
    The end of time as measured in a 64 bit clock.
  </define>


  <message name = "DEBUT">
    Declare an epoch.

    <field name = "ident" type = "number" size = "4">
      The epoch identifier is a count that monotonically increases
      with wall clock time.
    </field>

    <field name = "dtbeg" type = "number" size="8">
      The begin time of the epoch measured in the data clock.
    </field>

    <field name = "dtend" type = "number" size="8">
      The end time of the epoch measured in the data clock.
    </field>

    <field name = "declared" type = "number" size = "8">
      The wall clock time at which the epoch was declared in units of
      us since the start of the Unix Epoch.
    </field>

  </message>

  <message name = "RESCIND">
    Invalidate a previously declared epoch.
    
    <field name = "ident" type = "number" size = "4">
      The epoch identifier.
    </field>
    
    <field name = "declared" type = "number" size = "8">
      The wall clock time when the rescind was decided.
    </field>
  </message>


</class>
